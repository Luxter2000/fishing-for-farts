:root{
  --bg:#f7fafc;
  --card:#ffffff;
  --ink:#0f172a;
  --muted:#475569;
  --primary:#4f46e5;
  --accent:#06b6d4;
  --good:#16a34a;
  --warn:#eab308;
  --bad:#ef4444;
  --grid:#e2e8f0;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font:17px/1.5 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
  color:var(--ink);
  background:var(--bg);
}

.app-header{
  position:sticky; top:0; z-index:20;
  display:flex; align-items:center; justify-content:space-between;
  gap:1rem; padding:0.75rem 1rem; background:var(--card);
  border-bottom:1px solid var(--grid);
  backdrop-filter:saturate(120%) blur(6px);
}
.brand{display:flex; align-items:center; gap:0.75rem}
.logo{width:44px; height:44px}
h1{font-size:1.25rem; margin:0}
.subtitle{margin:0; color:var(--muted); font-size:0.9rem}
.header-actions{display:flex; gap:0.5rem; flex-wrap:wrap}

.btn{
  display:inline-flex; align-items:center; gap:0.4rem;
  border:1px solid var(--grid); background:#fff; color:var(--ink);
  padding:0.6rem 0.9rem; border-radius:14px; cursor:pointer;
  box-shadow:0 1px 0 rgba(0,0,0,.03);
  transition:transform .05s ease, box-shadow .2s ease, background .2s ease;
  touch-action:manipulation;
}
.btn:hover{background:#f9fafb}
.btn:active{transform:translateY(1px)}
.btn:focus-visible{outline:3px solid #a5b4fc; outline-offset:2px}
.btn.primary{background:var(--primary); color:#fff; border:none}
.btn.small{padding:0.4rem 0.6rem; font-size:0.95rem}

.layout{
  display:grid; gap:1rem; padding:1rem; max-width:1400px; margin:0 auto;
  grid-template-columns:1fr; align-items:start;
}
.panel .card{background:var(--card); border:1px solid var(--grid); border-radius:16px; padding:1rem; box-shadow:0 4px 16px rgba(15,23,42,.05)}
.card h2{display:flex; align-items:center; gap:0.5rem; margin:0 0 .75rem}
.card.now .conditions{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:.35rem .75rem}
.label{color:var(--muted); margin-right:.35rem}
.pun{margin:.6rem 0 0; color:#6b7280; font-style:italic}

.species-grid{display:grid; grid-template-columns:1fr 1fr; gap:.75rem}
.species-card{
  display:grid; grid-template-columns:68px 1fr; gap:.6rem; align-items:center;
  border:1px solid var(--grid); border-radius:14px; padding:.6rem; background:linear-gradient(180deg,#fff, #fafcff);
}
.species-card img{width:68px; height:68px; object-fit:cover; border-radius:12px}
.species-card .meta{display:flex; flex-direction:column; gap:2px}
.chance{font-weight:700}
.chance.good{color:var(--good)}
.chance.ok{color:var(--warn)}
.chance.bad{color:var(--bad)}
.species-card a{color:var(--primary); font-weight:600; cursor:pointer; text-decoration:none}

.map-card #map{height:380px; border-radius:12px; overflow:hidden}
.spot-list{list-style:none; margin:0; padding:0; display:grid; gap:.6rem}
.spot-item{display:grid; grid-template-columns:1fr auto; gap:.4rem; align-items:center; border:1px solid var(--grid); padding:.7rem; border-radius:12px}
.spot-item .sub{color:var(--muted); font-size:.95rem}
.spot-actions{display:flex; gap:.35rem; align-items:center}
.badge{border-radius:999px; padding:.25rem .6rem; background:#eef2ff; color:#3730a3; font-size:.85rem}

.chart canvas{width:100%}
.legend-note{color:var(--muted); font-size:.9rem; margin-top:.4rem}

.catches-header{display:flex; align-items:center; justify-content:space-between}
.xp-bar-wrap{background:#f3f4f6; border-radius:999px; padding:.25rem; border:1px solid var(--grid); margin:.5rem 0 1rem}
.xp-bar{height:22px; background:linear-gradient(90deg,var(--accent),var(--primary)); border-radius:999px; width:0%; display:flex; align-items:center; justify-content:center; color:#fff; font-weight:700}
.catch-list{list-style:none; margin:0; padding:0; display:grid; gap:.5rem}
.catch-item{display:grid; grid-template-columns:auto 1fr; gap:.6rem; align-items:center; border:1px solid var(--grid); padding:.6rem; border-radius:12px}
.thumb{width:44px; height:44px; border-radius:10px; background:url('assets/fart.svg') center/cover no-repeat}

.modal{width:min(680px,96vw); border:none; border-radius:16px; padding:0; box-shadow:0 10px 30px rgba(0,0,0,.2)}
.modal::backdrop{background:rgba(15,23,42,.4)}
.modal .modal-body{padding:1rem}
.modal-close{position:absolute; right:.5rem; top:.5rem; border:none; background:#111827; color:#fff; width:32px; height:32px; border-radius:50%; cursor:pointer}
.modal:focus-visible{outline:3px solid #a5b4fc}

.form{display:grid; gap:.6rem}
.form label{display:grid; gap:.25rem; font-weight:600}
.form input, .form select, .form textarea{
  padding:.6rem .7rem; border:1px solid var(--grid); border-radius:10px; font:inherit; background:#fff
}
.form .actions{display:flex; justify-content:flex-end}

.toast{
  position:fixed; left:50%; transform:translateX(-50%);
  bottom:18px; background:#111827; color:#fff; padding:.6rem .8rem;
  border-radius:12px; opacity:0; pointer-events:none; transition:opacity .25s, transform .25s;
}
.toast.show{opacity:1; transform:translateX(-50%) translateY(-4px)}

.app-footer{padding:1rem; text-align:center; color:var(--muted)}

.arrow{
  display:inline-block; margin-left:.4rem; width:16px; height:16px;
  background:url('assets/arrow.svg') center/contain no-repeat;
  transform:rotate(0deg); vertical-align:middle;
}

/* Motion accessibility */
@media (prefers-reduced-motion: reduce){
  *{animation:none!important; transition:none!important}
}

/* Responsive */
@media (min-width: 1000px){
  .layout{grid-template-columns: 420px minmax(0,1fr)}
  .species-grid{grid-template-columns:1fr 1fr}
  .map-card #map{height:460px}
}
@media (max-width: 420px){
  .species-grid{grid-template-columns:1fr}
}

/* Fun subtle background fart bubbles */
body{
  background-image:
    radial-gradient(24px 24px at 10% 10%, rgba(6,182,212,.08), transparent),
    radial-gradient(20px 20px at 90% 18%, rgba(79,70,229,.08), transparent),
    radial-gradient(28px 28px at 30% 70%, rgba(34,197,94,.07), transparent);
  background-attachment: fixed;
}
